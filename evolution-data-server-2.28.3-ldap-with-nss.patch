diff -up evolution-data-server-2.28.3/m4/evo_ldap_check.m4.ldap_with_nss evolution-data-server-2.28.3/m4/evo_ldap_check.m4
--- evolution-data-server-2.28.3/m4/evo_ldap_check.m4.ldap_with_nss	2011-02-02 15:49:51.123652744 +0100
+++ evolution-data-server-2.28.3/m4/evo_ldap_check.m4	2011-02-02 15:50:33.275652064 +0100
@@ -67,7 +67,8 @@ AC_DEFUN([EVO_LDAP_CHECK],[
 			AC_MSG_ERROR([evolution requires OpenLDAP version >= 2])
 		fi
 
-		AC_CHECK_LIB(resolv, res_query, [LDAP_LIBS="-lresolv"])
+		LDAP_LIBS="-lssl3 -lsmime3 -lnss3 -lnssutil3 -lplds4 -lplc4 -lnspr4"
+		AC_CHECK_LIB(resolv, res_query, [LDAP_LIBS="$LDAP_LIBS -lresolv"])
 		AC_CHECK_LIB(socket, bind, [LDAP_LIBS="$LDAP_LIBS -lsocket"])
 		AC_CHECK_LIB(nsl, gethostbyaddr, [LDAP_LIBS="$LDAP_LIBS -lnsl"])
 		AC_CHECK_LIB(lber, ber_get_tag, [
