<?xml version="1.0"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN" 
               "http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd">
<refentry id="EBookBackendSummary">
<refmeta>
<refentrytitle role="top_of_page" id="EBookBackendSummary.top_of_page">EBookBackendSummary</refentrytitle>
<manvolnum>3</manvolnum>
<refmiscinfo>
  LIBEDATA-BOOK Library
</refmiscinfo>
</refmeta>
<refnamediv>
<refname>EBookBackendSummary</refname>
<refpurpose></refpurpose>
</refnamediv>

<refsynopsisdiv id="EBookBackendSummary.synopsis" role="synopsis">
<title role="synopsis.title">Synopsis</title>

<synopsis>struct              <link linkend="EBookBackendSummary-struct">EBookBackendSummary</link>;
<link linkend="EBookBackendSummary"><returnvalue>EBookBackendSummary</returnvalue></link>* <link linkend="e-book-backend-summary-new">e_book_backend_summary_new</link>         (<parameter>const <link linkend="gchar"><type>gchar</type></link> *summary_path</parameter>,
                                                         <parameter><link linkend="gint"><type>gint</type></link> flush_timeout_millis</parameter>);
<link linkend="gboolean"><returnvalue>gboolean</returnvalue></link>            <link linkend="e-book-backend-summary-load">e_book_backend_summary_load</link>         (<parameter><link linkend="EBookBackendSummary"><type>EBookBackendSummary</type></link> *summary</parameter>);
<link linkend="gboolean"><returnvalue>gboolean</returnvalue></link>            <link linkend="e-book-backend-summary-save">e_book_backend_summary_save</link>         (<parameter><link linkend="EBookBackendSummary"><type>EBookBackendSummary</type></link> *summary</parameter>);
<link linkend="void"><returnvalue>void</returnvalue></link>                <link linkend="e-book-backend-summary-add-contact">e_book_backend_summary_add_contact</link>  (<parameter><link linkend="EBookBackendSummary"><type>EBookBackendSummary</type></link> *summary</parameter>,
                                                         <parameter><link linkend="EContact"><type>EContact</type></link> *contact</parameter>);
<link linkend="void"><returnvalue>void</returnvalue></link>                <link linkend="e-book-backend-summary-remove-contact">e_book_backend_summary_remove_contact</link>
                                                        (<parameter><link linkend="EBookBackendSummary"><type>EBookBackendSummary</type></link> *summary</parameter>,
                                                         <parameter>const <link linkend="gchar"><type>gchar</type></link> *id</parameter>);
<link linkend="gboolean"><returnvalue>gboolean</returnvalue></link>            <link linkend="e-book-backend-summary-check-contact">e_book_backend_summary_check_contact</link>
                                                        (<parameter><link linkend="EBookBackendSummary"><type>EBookBackendSummary</type></link> *summary</parameter>,
                                                         <parameter>const <link linkend="gchar"><type>gchar</type></link> *id</parameter>);
<link linkend="void"><returnvalue>void</returnvalue></link>                <link linkend="e-book-backend-summary-touch">e_book_backend_summary_touch</link>        (<parameter><link linkend="EBookBackendSummary"><type>EBookBackendSummary</type></link> *summary</parameter>);
<link linkend="gboolean"><returnvalue>gboolean</returnvalue></link>            <link linkend="e-book-backend-summary-is-up-to-date">e_book_backend_summary_is_up_to_date</link>
                                                        (<parameter><link linkend="EBookBackendSummary"><type>EBookBackendSummary</type></link> *summary</parameter>,
                                                         <parameter><link linkend="time-t"><type>time_t</type></link> t</parameter>);
<link linkend="gboolean"><returnvalue>gboolean</returnvalue></link>            <link linkend="e-book-backend-summary-is-summary-query">e_book_backend_summary_is_summary_query</link>
                                                        (<parameter><link linkend="EBookBackendSummary"><type>EBookBackendSummary</type></link> *summary</parameter>,
                                                         <parameter>const <link linkend="gchar"><type>gchar</type></link> *query</parameter>);
<link linkend="GPtrArray"><returnvalue>GPtrArray</returnvalue></link>*          <link linkend="e-book-backend-summary-search">e_book_backend_summary_search</link>       (<parameter><link linkend="EBookBackendSummary"><type>EBookBackendSummary</type></link> *summary</parameter>,
                                                         <parameter>const <link linkend="gchar"><type>gchar</type></link> *query</parameter>);
<link linkend="gchar"><returnvalue>gchar</returnvalue></link> *             <link linkend="e-book-backend-summary-get-summary-vcard">e_book_backend_summary_get_summary_vcard</link>
                                                        (<parameter><link linkend="EBookBackendSummary"><type>EBookBackendSummary</type></link> *summary</parameter>,
                                                         <parameter>const <link linkend="gchar"><type>gchar</type></link> *id</parameter>);
</synopsis>
</refsynopsisdiv>
<refsect1 id="EBookBackendSummary.object-hierarchy" role="object_hierarchy">
<title role="object_hierarchy.title">Object Hierarchy</title>
<synopsis>
  <link linkend="GObject">GObject</link>
   +----EBookBackendSummary
</synopsis>
</refsect1>

<refsect1 id="EBookBackendSummary.description" role="desc">
<title role="desc.title">Description</title>
<para>
</para>
</refsect1>
<refsect1 id="EBookBackendSummary.details" role="details">
<title role="details.title">Details</title>
<refsect2 id="EBookBackendSummary-struct" role="struct">
<title>struct EBookBackendSummary</title>
<indexterm zone="EBookBackendSummary-struct"><primary>EBookBackendSummary</primary></indexterm>
<programlisting>struct EBookBackendSummary;</programlisting>
<para>
</para></refsect2>
<refsect2 id="e-book-backend-summary-new" role="function">
<title>e_book_backend_summary_new ()</title>
<indexterm zone="e-book-backend-summary-new"><primary>e_book_backend_summary_new</primary></indexterm>
<programlisting><link linkend="EBookBackendSummary"><returnvalue>EBookBackendSummary</returnvalue></link>* e_book_backend_summary_new         (<parameter>const <link linkend="gchar"><type>gchar</type></link> *summary_path</parameter>,
                                                         <parameter><link linkend="gint"><type>gint</type></link> flush_timeout_millis</parameter>);</programlisting>
<para>
Creates an <link linkend="EBookBackendSummary"><type>EBookBackendSummary</type></link> object without loading it
or otherwise affecting the file. <parameter>flush_timeout_millis</parameter>
specifies how much time should elapse, at a minimum, from
the summary is changed until it is flushed to disk.</para>
<variablelist role="params">
<varlistentry><term><parameter>summary_path</parameter>&#160;:</term>
<listitem><simpara>a local file system path
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>flush_timeout_millis</parameter>&#160;:</term>
<listitem><simpara>a flush interval, in milliseconds
</simpara></listitem></varlistentry>
<varlistentry><term><emphasis>Returns</emphasis>&#160;:</term><listitem><simpara> A new <link linkend="EBookBackendSummary"><type>EBookBackendSummary</type></link>.
</simpara></listitem></varlistentry>
</variablelist></refsect2>
<refsect2 id="e-book-backend-summary-load" role="function">
<title>e_book_backend_summary_load ()</title>
<indexterm zone="e-book-backend-summary-load"><primary>e_book_backend_summary_load</primary></indexterm>
<programlisting><link linkend="gboolean"><returnvalue>gboolean</returnvalue></link>            e_book_backend_summary_load         (<parameter><link linkend="EBookBackendSummary"><type>EBookBackendSummary</type></link> *summary</parameter>);</programlisting>
<para>
Attempts to load <parameter>summary</parameter> from disk. The load is successful if
the file was located, it was in the correct format, and it was
not out of date.</para>
<variablelist role="params">
<varlistentry><term><parameter>summary</parameter>&#160;:</term>
<listitem><simpara>an <link linkend="EBookBackendSummary"><type>EBookBackendSummary</type></link>
</simpara></listitem></varlistentry>
<varlistentry><term><emphasis>Returns</emphasis>&#160;:</term><listitem><simpara> <link linkend="TRUE:CAPS"><literal>TRUE</literal></link> if the load succeeded, <link linkend="FALSE:CAPS"><literal>FALSE</literal></link> if it failed.
</simpara></listitem></varlistentry>
</variablelist></refsect2>
<refsect2 id="e-book-backend-summary-save" role="function">
<title>e_book_backend_summary_save ()</title>
<indexterm zone="e-book-backend-summary-save"><primary>e_book_backend_summary_save</primary></indexterm>
<programlisting><link linkend="gboolean"><returnvalue>gboolean</returnvalue></link>            e_book_backend_summary_save         (<parameter><link linkend="EBookBackendSummary"><type>EBookBackendSummary</type></link> *summary</parameter>);</programlisting>
<para>
Attempts to save <parameter>summary</parameter> to disk.</para>
<variablelist role="params">
<varlistentry><term><parameter>summary</parameter>&#160;:</term>
<listitem><simpara>an <link linkend="EBookBackendSummary"><type>EBookBackendSummary</type></link>
</simpara></listitem></varlistentry>
<varlistentry><term><emphasis>Returns</emphasis>&#160;:</term><listitem><simpara> <link linkend="TRUE:CAPS"><literal>TRUE</literal></link> if the save succeeded, <link linkend="FALSE:CAPS"><literal>FALSE</literal></link> otherwise.
</simpara></listitem></varlistentry>
</variablelist></refsect2>
<refsect2 id="e-book-backend-summary-add-contact" role="function">
<title>e_book_backend_summary_add_contact ()</title>
<indexterm zone="e-book-backend-summary-add-contact"><primary>e_book_backend_summary_add_contact</primary></indexterm>
<programlisting><link linkend="void"><returnvalue>void</returnvalue></link>                e_book_backend_summary_add_contact  (<parameter><link linkend="EBookBackendSummary"><type>EBookBackendSummary</type></link> *summary</parameter>,
                                                         <parameter><link linkend="EContact"><type>EContact</type></link> *contact</parameter>);</programlisting>
<para>
Adds a summary of <parameter>contact</parameter> to <parameter>summary</parameter>. Does not check if
the contact already has a summary.</para>
<variablelist role="params">
<varlistentry><term><parameter>summary</parameter>&#160;:</term>
<listitem><simpara>an <link linkend="EBookBackendSummary"><type>EBookBackendSummary</type></link>
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>contact</parameter>&#160;:</term>
<listitem><simpara>an <link linkend="EContact"><type>EContact</type></link> to add
</simpara></listitem></varlistentry>
</variablelist></refsect2>
<refsect2 id="e-book-backend-summary-remove-contact" role="function">
<title>e_book_backend_summary_remove_contact ()</title>
<indexterm zone="e-book-backend-summary-remove-contact"><primary>e_book_backend_summary_remove_contact</primary></indexterm>
<programlisting><link linkend="void"><returnvalue>void</returnvalue></link>                e_book_backend_summary_remove_contact
                                                        (<parameter><link linkend="EBookBackendSummary"><type>EBookBackendSummary</type></link> *summary</parameter>,
                                                         <parameter>const <link linkend="gchar"><type>gchar</type></link> *id</parameter>);</programlisting>
<para>
Removes the summary of the contact identified by <parameter>id</parameter> from <parameter>summary</parameter>.</para>
<variablelist role="params">
<varlistentry><term><parameter>summary</parameter>&#160;:</term>
<listitem><simpara>an <link linkend="EBookBackendSummary"><type>EBookBackendSummary</type></link>
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>id</parameter>&#160;:</term>
<listitem><simpara>a unique contact ID string
</simpara></listitem></varlistentry>
</variablelist></refsect2>
<refsect2 id="e-book-backend-summary-check-contact" role="function">
<title>e_book_backend_summary_check_contact ()</title>
<indexterm zone="e-book-backend-summary-check-contact"><primary>e_book_backend_summary_check_contact</primary></indexterm>
<programlisting><link linkend="gboolean"><returnvalue>gboolean</returnvalue></link>            e_book_backend_summary_check_contact
                                                        (<parameter><link linkend="EBookBackendSummary"><type>EBookBackendSummary</type></link> *summary</parameter>,
                                                         <parameter>const <link linkend="gchar"><type>gchar</type></link> *id</parameter>);</programlisting>
<para>
Checks if a summary of the contact identified by <parameter>id</parameter>
exists in <parameter>summary</parameter>.</para>
<variablelist role="params">
<varlistentry><term><parameter>summary</parameter>&#160;:</term>
<listitem><simpara>an <link linkend="EBookBackendSummary"><type>EBookBackendSummary</type></link>
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>id</parameter>&#160;:</term>
<listitem><simpara>a unique contact ID string
</simpara></listitem></varlistentry>
<varlistentry><term><emphasis>Returns</emphasis>&#160;:</term><listitem><simpara> <link linkend="TRUE:CAPS"><literal>TRUE</literal></link> if the summary exists, <link linkend="FALSE:CAPS"><literal>FALSE</literal></link> otherwise.
</simpara></listitem></varlistentry>
</variablelist></refsect2>
<refsect2 id="e-book-backend-summary-touch" role="function">
<title>e_book_backend_summary_touch ()</title>
<indexterm zone="e-book-backend-summary-touch"><primary>e_book_backend_summary_touch</primary></indexterm>
<programlisting><link linkend="void"><returnvalue>void</returnvalue></link>                e_book_backend_summary_touch        (<parameter><link linkend="EBookBackendSummary"><type>EBookBackendSummary</type></link> *summary</parameter>);</programlisting>
<para>
Indicates that <parameter>summary</parameter> has changed and should be flushed to disk.</para>
<variablelist role="params">
<varlistentry><term><parameter>summary</parameter>&#160;:</term>
<listitem><simpara>an <link linkend="EBookBackendSummary"><type>EBookBackendSummary</type></link>
</simpara></listitem></varlistentry>
</variablelist></refsect2>
<refsect2 id="e-book-backend-summary-is-up-to-date" role="function">
<title>e_book_backend_summary_is_up_to_date ()</title>
<indexterm zone="e-book-backend-summary-is-up-to-date"><primary>e_book_backend_summary_is_up_to_date</primary></indexterm>
<programlisting><link linkend="gboolean"><returnvalue>gboolean</returnvalue></link>            e_book_backend_summary_is_up_to_date
                                                        (<parameter><link linkend="EBookBackendSummary"><type>EBookBackendSummary</type></link> *summary</parameter>,
                                                         <parameter><link linkend="time-t"><type>time_t</type></link> t</parameter>);</programlisting>
<para>
Checks if <parameter>summary</parameter> is more recent than <parameter>t</parameter>.</para>
<variablelist role="params">
<varlistentry><term><parameter>summary</parameter>&#160;:</term>
<listitem><simpara>an <link linkend="EBookBackendSummary"><type>EBookBackendSummary</type></link>
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>t</parameter>&#160;:</term>
<listitem><simpara>the time to compare with
</simpara></listitem></varlistentry>
<varlistentry><term><emphasis>Returns</emphasis>&#160;:</term><listitem><simpara> <link linkend="TRUE:CAPS"><literal>TRUE</literal></link> if the summary is up to date, <link linkend="FALSE:CAPS"><literal>FALSE</literal></link> otherwise.
</simpara></listitem></varlistentry>
</variablelist></refsect2>
<refsect2 id="e-book-backend-summary-is-summary-query" role="function">
<title>e_book_backend_summary_is_summary_query ()</title>
<indexterm zone="e-book-backend-summary-is-summary-query"><primary>e_book_backend_summary_is_summary_query</primary></indexterm>
<programlisting><link linkend="gboolean"><returnvalue>gboolean</returnvalue></link>            e_book_backend_summary_is_summary_query
                                                        (<parameter><link linkend="EBookBackendSummary"><type>EBookBackendSummary</type></link> *summary</parameter>,
                                                         <parameter>const <link linkend="gchar"><type>gchar</type></link> *query</parameter>);</programlisting>
<para>
Checks if <parameter>query</parameter> can be satisfied by searching only the fields
stored by <parameter>summary</parameter>.</para>
<variablelist role="params">
<varlistentry><term><parameter>summary</parameter>&#160;:</term>
<listitem><simpara>an <link linkend="EBookBackendSummary"><type>EBookBackendSummary</type></link>
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>query</parameter>&#160;:</term>
<listitem><simpara>an s-expression to check
</simpara></listitem></varlistentry>
<varlistentry><term><emphasis>Returns</emphasis>&#160;:</term><listitem><simpara> <link linkend="TRUE:CAPS"><literal>TRUE</literal></link> if the query can be satisfied, <link linkend="FALSE:CAPS"><literal>FALSE</literal></link> otherwise.
</simpara></listitem></varlistentry>
</variablelist></refsect2>
<refsect2 id="e-book-backend-summary-search" role="function">
<title>e_book_backend_summary_search ()</title>
<indexterm zone="e-book-backend-summary-search"><primary>e_book_backend_summary_search</primary></indexterm>
<programlisting><link linkend="GPtrArray"><returnvalue>GPtrArray</returnvalue></link>*          e_book_backend_summary_search       (<parameter><link linkend="EBookBackendSummary"><type>EBookBackendSummary</type></link> *summary</parameter>,
                                                         <parameter>const <link linkend="gchar"><type>gchar</type></link> *query</parameter>);</programlisting>
<para>
Searches <parameter>summary</parameter> for contacts matching <parameter>query</parameter>.</para>
<variablelist role="params">
<varlistentry><term><parameter>summary</parameter>&#160;:</term>
<listitem><simpara>an <link linkend="EBookBackendSummary"><type>EBookBackendSummary</type></link>
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>query</parameter>&#160;:</term>
<listitem><simpara>an s-expression
</simpara></listitem></varlistentry>
<varlistentry><term><emphasis>Returns</emphasis>&#160;:</term><listitem><simpara> A <link linkend="GPtrArray"><type>GPtrArray</type></link> of pointers to contact ID strings.
</simpara></listitem></varlistentry>
</variablelist></refsect2>
<refsect2 id="e-book-backend-summary-get-summary-vcard" role="function">
<title>e_book_backend_summary_get_summary_vcard ()</title>
<indexterm zone="e-book-backend-summary-get-summary-vcard"><primary>e_book_backend_summary_get_summary_vcard</primary></indexterm>
<programlisting><link linkend="gchar"><returnvalue>gchar</returnvalue></link> *             e_book_backend_summary_get_summary_vcard
                                                        (<parameter><link linkend="EBookBackendSummary"><type>EBookBackendSummary</type></link> *summary</parameter>,
                                                         <parameter>const <link linkend="gchar"><type>gchar</type></link> *id</parameter>);</programlisting>
<para>
Constructs and returns a VCard from the contact summary specified
by <parameter>id</parameter>.</para>
<variablelist role="params">
<varlistentry><term><parameter>summary</parameter>&#160;:</term>
<listitem><simpara>an <link linkend="EBookBackendSummary"><type>EBookBackendSummary</type></link>
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>id</parameter>&#160;:</term>
<listitem><simpara>a unique contact ID
</simpara></listitem></varlistentry>
<varlistentry><term><emphasis>Returns</emphasis>&#160;:</term><listitem><simpara> A new VCard, or <link linkend="NULL:CAPS"><literal>NULL</literal></link> if the contact summary didn't exist.
</simpara></listitem></varlistentry>
</variablelist></refsect2>

</refsect1>

</refentry>
